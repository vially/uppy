{"version":3,"sources":["../../../src/plugins/Dashboard/FileCard.js"],"names":["getFileTypeIcon","require","FilePreview","h","Component","module","exports","props","meta","tempStoreMetaOrSubmit","bind","renderMetaFields","handleSave","handleCancel","ev","file","files","fileCardFor","keyCode","stopPropagation","preventDefault","saveFileCard","id","value","target","name","dataset","metaFields","map","field","placeholder","fileID","toggleFileCard","render","i18n","backgroundColor","type","color"],"mappings":"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","file":"FileCard.js","sourcesContent":["const getFileTypeIcon = require('./getFileTypeIcon')\nconst FilePreview = require('./FilePreview')\nconst { h, Component } = require('preact')\n\nmodule.exports = class FileCard extends Component {\n  constructor (props) {\n    super(props)\n\n    this.meta = {}\n\n    this.tempStoreMetaOrSubmit = this.tempStoreMetaOrSubmit.bind(this)\n    this.renderMetaFields = this.renderMetaFields.bind(this)\n    this.handleSave = this.handleSave.bind(this)\n    this.handleCancel = this.handleCancel.bind(this)\n  }\n\n  tempStoreMetaOrSubmit (ev) {\n    const file = this.props.files[this.props.fileCardFor]\n\n    if (ev.keyCode === 13) {\n      ev.stopPropagation()\n      ev.preventDefault()\n      this.props.saveFileCard(this.meta, file.id)\n      return\n    }\n\n    const value = ev.target.value\n    const name = ev.target.dataset.name\n    this.meta[name] = value\n  }\n\n  renderMetaFields (file) {\n    const metaFields = this.props.metaFields || []\n    return metaFields.map((field) => {\n      return <fieldset class=\"uppy-DashboardFileCard-fieldset\">\n        <label class=\"uppy-DashboardFileCard-label\">{field.name}</label>\n        <input class=\"uppy-c-textInput uppy-DashboardFileCard-input\"\n          type=\"text\"\n          data-name={field.id}\n          value={file.meta[field.id]}\n          placeholder={field.placeholder}\n          onkeyup={this.tempStoreMetaOrSubmit}\n          onkeydown={this.tempStoreMetaOrSubmit}\n          onkeypress={this.tempStoreMetaOrSubmit} /></fieldset>\n    })\n  }\n\n  handleSave (ev) {\n    const fileID = this.props.fileCardFor\n    this.props.saveFileCard(this.meta, fileID)\n  }\n\n  handleCancel (ev) {\n    this.meta = {}\n    this.props.toggleFileCard()\n  }\n\n  render () {\n    const file = this.props.files[this.props.fileCardFor]\n\n    return <div class=\"uppy-DashboardFileCard\" aria-hidden={!this.props.fileCardFor}>\n      {this.props.fileCardFor &&\n        <div style=\"width: 100%; height: 100%;\">\n          <div class=\"uppy-DashboardContent-bar\">\n            <h2 class=\"uppy-DashboardContent-title\">{this.props.i18n('editing')} <span class=\"uppy-DashboardContent-titleFile\">{file.meta ? file.meta.name : file.name}</span></h2>\n            <button class=\"uppy-DashboardContent-back\" type=\"button\" title={this.props.i18n('finishEditingFile')}\n              onclick={this.handleSave}>{this.props.i18n('done')}</button>\n          </div>\n\n          <div class=\"uppy-DashboardFileCard-inner\">\n            <div class=\"uppy-DashboardFileCard-preview\" style={{ backgroundColor: getFileTypeIcon(file.type).color }}>\n              <FilePreview file={file} />\n            </div>\n\n            <div class=\"uppy-DashboardFileCard-info\">\n              {this.renderMetaFields(file)}\n            </div>\n\n            <div class=\"uppy-Dashboard-actions\">\n              <button class=\"uppy-u-reset uppy-c-btn uppy-c-btn-primary uppy-Dashboard-actionsBtn\"\n                type=\"button\"\n                title={this.props.i18n('finishEditingFiles')}\n                onclick={this.handleSave}>Save changes</button>\n              <button class=\"uppy-u-reset uppy-c-btn uppy-c-btn-link uppy-Dashboard-actionsBtn\"\n                type=\"button\"\n                title={this.props.i18n('finishEditingFiles')}\n                onclick={this.handleCancel}>Cancel</button>\n            </div>\n          </div>\n        </div>\n      }\n    </div>\n  }\n}\n"]}